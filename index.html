<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cuvette Projects</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <style>
      * {
        transition: 0.3s;
        margin: 0%;
        padding: 0%;
        scrollbar-width: none;
      }

      html,
      body {
        position: relative;
        display: flex;
        flex-direction: column;
        /* justify-content: space-between; */
        align-items: center;
        height: 100vh;
        width: 100%;
        font-family: "Trebuchet MS", "Lucida Sans Unicode", "Lucida Grande",
          "Lucida Sans", Arial, sans-serif;
      }

      .logo {
        margin: 0;
        padding: 0;
        width: 100%;
        font-size: 26px;
        background: linear-gradient(
          45deg,
          rgb(81, 68, 156),
          #000,
          mediumslateblue
        );
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: rainbow 10s ease-in-out infinite;
        background-size: 200% 200%;
        background-position: 100% 0;
      }

      @keyframes rainbow {
        0% {
          background-position: 0 0;
        }

        50% {
          background-position: 100% 0;
        }

        100% {
          background-position: 0 0;
        }
      }

      .box {
        z-index: 0;
        position: relative;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        /* flex-direction: column; */
        gap: 20px;
        width: 80%;
        height: 100%;
        padding: 20px;
        margin: 110px 0;
        border-radius: 20px;
        background: #fff;
        border-top: 1px solid rgba(124, 104, 238, 0.377);
        border-left: 1px solid rgba(124, 104, 238, 0.377);
        box-shadow: 4px 4px 10px rgba(124, 104, 238, 0.285);
        scrollbar-width: none;
        overflow-y: auto;
      }

      .card {
        position: relative;
        width: 200px;
        height: 200px;
        /* aspect-ratio: 1 / 1; */
        cursor: pointer;
        border-radius: 12px;
        border-top: 1px solid rgba(124, 104, 238, 0.2);
        border-left: 1px solid rgba(124, 104, 238, 0.2);
        box-shadow: 2px 2px 6px rgba(124, 104, 238, 0.2);
      }

      .card:hover {
        scale: 105%;
      }

      .content {
        width: 100%;
        height: 100%;
        overflow: hidden;
        position: relative;
        border-radius: 12px;
      }

      img {
        width: 100%;
        scale: 105%;
        object-fit: contain;
      }

      .meta {
        position: absolute;
        bottom: 0%;
        padding: 10px;
        width: 100%;
        background-color: white;
        box-shadow: 0px 0px 25px 30px #fff;
      }
      .meta .title {
        font-weight: 600;
        font-size: 14px;
        margin-bottom: 6px;
      }

      nav {
        z-index: 1;
        top: 0%;
        width: 80%;
        position: fixed;
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        margin: 20px 0;
        border-radius: 20px;
        background: #fff;
        border-top: 1px solid rgba(124, 104, 238, 0.377);
        border-left: 1px solid rgba(124, 104, 238, 0.377);
        box-shadow: 4px 4px 10px rgba(124, 104, 238, 0.285);
      }

      footer {
        z-index: 1;
        bottom: 0%;
        font-size: 14px;
        color: #333;
        width: 80%;
        position: fixed;
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        margin: 20px 0;
        border-radius: 20px;
        background: #fff;
        border-top: 1px solid rgba(124, 104, 238, 0.377);
        border-left: 1px solid rgba(124, 104, 238, 0.377);
        box-shadow: 4px 4px 10px rgba(124, 104, 238, 0.285);
      }

      a {
        color: mediumslateblue;
        text-decoration: none;
      }

      .social {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        gap: 10px;
        font-size: 22px;
      }
    </style>
  </head>

  <body>
    <nav>
      <h1 class="logo">Cuvette Projects</h1>
    </nav>

    <section id="box" class="box"></section>

    <footer>
      <p>
        Created by
        <a
          target="_blank"
          href="https://drive.google.com/file/d/1uu5crqTDzOiWwbaevrHqCNdRF0Zy742a/view?usp=sharing"
          >Tathagata Mishra</a
        >
      </p>

      <div class="social">
        <a
          target="_blank"
          href="https://github.com/tathagatamishra/CuvetteProjects"
          class="fa fa-github"
        ></a>
        <a
          target="_blank"
          href="https://www.linkedin.com/in/tathagatamishra/"
          class="fa fa-linkedin"
        ></a>
      </div>
    </footer>

    <script>
      async function load() {
        try {
          const url = "/projects.json"; // use absolute path for deployed site
          console.log("Fetching", url);

          const res = await fetch(url, { cache: "no-cache" });
          if (!res.ok) {
            // Log status + response text (if any) to help debug
            const text = await res.text().catch(() => "<no body>");
            throw new Error(
              `Failed to fetch ${url}: ${res.status} ${res.statusText} â€” ${text}`
            );
          }

          const projects = await res.json();
          const box = document.getElementById("box");

          projects.reverse().forEach((project) => {
            const card = document.createElement("div");
            card.className = "card";
            const content = document.createElement("div");
            content.className = "content";

            const image = document.createElement("img");
            image.src = project.thumbnail;
            image.setAttribute("loading", "lazy");

            const meta = document.createElement("div");
            meta.className = "meta";
            meta.innerHTML = `<div class="title">${project.name}</div>`;

            card.appendChild(content);
            content.appendChild(image);
            content.appendChild(meta);

            card.addEventListener("click", () =>
              window.open(project.path, "_blank")
            );
            box.appendChild(card);
          });
        } catch (err) {
          console.error("Error loading projects:", err);
          // Optionally show a user-friendly message on the page:
          const box = document.getElementById("box");
          box.innerHTML =
            '<p style="padding:20px">Could not load projects. Open console for details.</p>';
        }
      }

      load();
    </script>
  </body>
</html>
